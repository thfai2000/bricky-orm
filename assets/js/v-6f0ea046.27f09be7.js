"use strict";(self.webpackChunktaichi_orm=self.webpackChunktaichi_orm||[]).push([[708],{5854:(n,s,e)=>{e.r(s),e.d(s,{data:()=>a});const a={key:"v-6f0ea046",path:"/guide/typescript-support.html",title:"Typescript Support",lang:"en-US",frontmatter:{},excerpt:"",headers:[{level:2,title:"type ModelRepository",slug:"type-modelrepository",children:[]},{level:2,title:"type ModelRecord",slug:"type-modelrecord",children:[]},{level:2,title:"Circular dependencies",slug:"circular-dependencies",children:[]}],filePathRelative:"guide/typescript-support.md",git:{updatedTime:1639074277e3,contributors:[{name:"Eddie Tang",email:"thfai2000@gmail.com",commits:7}]}}},2795:(n,s,e)=>{e.r(s),e.d(s,{default:()=>f});var a=e(6252);const t=(0,a._)("h1",{id:"typescript-support",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#typescript-support","aria-hidden":"true"},"#"),(0,a.Uk)(" Typescript Support")],-1),o=(0,a._)("h2",{id:"type-modelrepository",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#type-modelrepository","aria-hidden":"true"},"#"),(0,a.Uk)(" type ModelRepository")],-1),l=(0,a._)("p",null,[(0,a.Uk)("Some IDE (like VSCode) can show typescript hints if the type "),(0,a._)("code",null,"ModelRepository"),(0,a.Uk)(" is well-determined.")],-1),c=(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("Shows "),(0,a._)("code",null,"Property"),(0,a.Uk)(" Suggestion in data query")])],-1),p=["src"],r=(0,a._)("ul",null,[(0,a._)("li",null,"Shows the type of records found by Model API")],-1),_=["src"],i=(0,a._)("p",null,[(0,a.Uk)("For the "),(0,a._)("code",null,"ORMConfig"),(0,a.Uk)(", if you use "),(0,a._)("code",null,"models"),(0,a.Uk)(" to register your Models, the type of "),(0,a._)("code",null,"ModelRepository"),(0,a.Uk)(" can be determined automatically.")],-1),u=(0,a._)("p",null,[(0,a._)("code",null,"ORMConfig"),(0,a.Uk)(" Example:")],-1),k=(0,a._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,a._)("pre",{class:"language-typescript"},[(0,a._)("code",null,[(0,a._)("span",{class:"token keyword"},"import"),(0,a.Uk)(" Product "),(0,a._)("span",{class:"token keyword"},"from"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'./models/product'"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token keyword"},"const"),(0,a.Uk)(" orm "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"new"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},[(0,a._)("span",{class:"token constant"},"ORM")]),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n    models"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n        Product\n    "),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token comment"},"// p: ModelRepository<typeof Product>"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"let"),(0,a.Uk)(" repo "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(" orm"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"getContext"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("repos"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("Product\n")])]),(0,a._)("div",{class:"highlight-lines"},[(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("div",{class:"highlight-line"}," "),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"8"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"9"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"10"),(0,a._)("br")])],-1),d=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"language-javascript"},[(0,a._)("code",null,[(0,a._)("span",{class:"token keyword"},"const"),(0,a.Uk)(" orm "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"new"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},"ORM"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n    models"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n        Product"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token function"},"require"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'./models/product'"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n    "),(0,a._)("span",{class:"token punctuation"},"}"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token comment"},"// p: ModelRepository<typeof Product>"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"let"),(0,a.Uk)(" repo "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(" orm"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"getContext"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("repos"),(0,a._)("span",{class:"token punctuation"},"."),(0,a.Uk)("Product\n")])]),(0,a._)("div",{class:"highlight-lines"},[(0,a._)("br"),(0,a._)("br"),(0,a._)("div",{class:"highlight-line"}," "),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"8"),(0,a._)("br")])],-1),b=(0,a._)("p",null,[(0,a.Uk)("But the "),(0,a._)("code",null,"type"),(0,a.Uk)(" of the respository cannot be determined if "),(0,a._)("code",null,"modelsPath"),(0,a.Uk)(" is used for Model registration. If you want the typescript hints shown propertly, you have to get the "),(0,a._)("code",null,"ModelRepository"),(0,a.Uk)(" by "),(0,a._)("code",null,"Model"),(0,a.Uk)(" class so that the "),(0,a._)("code",null,"type"),(0,a.Uk)(" can be inferred.")],-1),m=(0,a._)("div",{class:"language-typescript ext-ts line-numbers-mode"},[(0,a._)("pre",{class:"language-typescript"},[(0,a._)("code",null,[(0,a._)("span",{class:"token keyword"},"import"),(0,a.Uk)(" Product "),(0,a._)("span",{class:"token keyword"},"from"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'./models/product'"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token keyword"},"const"),(0,a.Uk)(" orm "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"new"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},[(0,a._)("span",{class:"token constant"},"ORM")]),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n    modelsPath"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'./models'"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token comment"},"// repo: ModelRepository<typeof Product>"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"let"),(0,a.Uk)(" repo "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(" orm"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"getContext"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"getRepository"),(0,a._)("span",{class:"token punctuation"},"("),(0,a.Uk)("Product"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token keyword"},"let"),(0,a.Uk)(" records "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(" repo"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"find"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  select"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"["),(0,a._)("span",{class:"token string"},"'prop1'"),(0,a._)("span",{class:"token punctuation"},"]"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n")])]),(0,a._)("div",{class:"highlight-lines"},[(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("div",{class:"highlight-line"}," "),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"8"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"9"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"10"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"11"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"12"),(0,a._)("br")])],-1),U=(0,a._)("div",{class:"language-javascript ext-js line-numbers-mode"},[(0,a._)("pre",{class:"language-javascript"},[(0,a._)("code",null,[(0,a._)("span",{class:"token keyword"},"const"),(0,a.Uk)(" orm "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(),(0,a._)("span",{class:"token keyword"},"new"),(0,a.Uk)(),(0,a._)("span",{class:"token class-name"},"ORM"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n    modelsPath"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token string"},"'./models'"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token comment"},"// repo: ModelRepository<typeof Product>"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token keyword"},"let"),(0,a.Uk)(" repo "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(" orm"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"getContext"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"getRepository"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token function"},"require"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token string"},"'./models/product'"),(0,a._)("span",{class:"token punctuation"},")"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n\n"),(0,a._)("span",{class:"token keyword"},"let"),(0,a.Uk)(" records "),(0,a._)("span",{class:"token operator"},"="),(0,a.Uk)(" repo"),(0,a._)("span",{class:"token punctuation"},"."),(0,a._)("span",{class:"token function"},"find"),(0,a._)("span",{class:"token punctuation"},"("),(0,a._)("span",{class:"token punctuation"},"{"),(0,a.Uk)("\n  select"),(0,a._)("span",{class:"token operator"},":"),(0,a.Uk)(),(0,a._)("span",{class:"token punctuation"},"["),(0,a._)("span",{class:"token string"},"'prop1'"),(0,a._)("span",{class:"token punctuation"},"]"),(0,a.Uk)("\n"),(0,a._)("span",{class:"token punctuation"},"}"),(0,a._)("span",{class:"token punctuation"},")"),(0,a.Uk)("\n")])]),(0,a._)("div",{class:"highlight-lines"},[(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("div",{class:"highlight-line"}," "),(0,a._)("br"),(0,a._)("br"),(0,a._)("br"),(0,a._)("br")]),(0,a._)("div",{class:"line-numbers"},[(0,a._)("span",{class:"line-number"},"1"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"2"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"3"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"4"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"5"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"6"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"7"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"8"),(0,a._)("br"),(0,a._)("span",{class:"line-number"},"9"),(0,a._)("br")])],-1),h=(0,a._)("h2",{id:"type-modelrecord",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#type-modelrecord","aria-hidden":"true"},"#"),(0,a.Uk)(" type ModelRecord")],-1),y=(0,a._)("h2",{id:"circular-dependencies",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#circular-dependencies","aria-hidden":"true"},"#"),(0,a.Uk)(" Circular dependencies")],-1),g={},f=(0,e(3744).Z)(g,[["render",function(n,s){const e=(0,a.up)("CodeGroupItem"),g=(0,a.up)("CodeGroup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[t,o,l,c,(0,a._)("img",{src:n.$withBase("/images/properties-suggestion.png"),style:{width:"500px"}},null,8,p),r,(0,a._)("img",{src:n.$withBase("/images/result-types.png"),style:{width:"300px"}},null,8,_),i,u,(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(e,{title:"TS",active:""},{default:(0,a.w5)((()=>[k])),_:1}),(0,a.Wm)(e,{title:"JS"},{default:(0,a.w5)((()=>[d])),_:1})])),_:1}),b,(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(e,{title:"TS",active:""},{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(e,{title:"JS"},{default:(0,a.w5)((()=>[U])),_:1})])),_:1}),h,y],64)}]])},3744:(n,s)=>{s.Z=(n,s)=>{const e=n.__vccOpts||n;for(const[n,a]of s)e[n]=a;return e}}}]);